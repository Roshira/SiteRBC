<div class="container contact-info text-center">
    <h2>Emergency Contact</h2>
    <p><strong>Phone:</strong> +380 99 123 4567</p>
    <p><strong>Email:</strong> <a href="mailto:roshirabuilding@gmail.com">roshirabuilding@gmail.com</a></p>
</div>

<!-- Кнопка чату -->
<button class="chat-button" id="chatButton">
    <span>Chat</span>
</button>

<!-- Контейнер чату -->
<div class="chat-container" id="chatContainer">
    <form id="chatForm">
        <h5>Live Chat</h5>
        <textarea class="form-control mb-2" rows="4" placeholder="Type your message here..." required></textarea>
        <button type="submit" class="btn btn-primary w-100">Send List</button>
    </form>
</div>

<script>
    const chatButton = document.getElementById('chatButton');
    const chatContainer = document.getElementById('chatContainer');
    const chatForm = document.getElementById('chatForm');

    chatButton.addEventListener('click', () => {
        chatContainer.style.display = chatContainer.style.display === 'none' || chatContainer.style.display === ''
            ? 'flex' : 'none';
    });

    chatForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const message = chatForm.querySelector('textarea').value;

        try {
            const response = await fetch('/Support/SendMessage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message }),
            });

            const result = await response.json();

            if (response.ok) {
                alert(result.message);
                chatForm.querySelector('textarea').value = '';
                chatContainer.style.display = 'none';
            } else {
                alert('Error: ' + result.message);
            }
        } catch (error) {
            alert('Error: Unable to connect to the server.');
            console.error(error);
        }
    });
</script>

<style>
    .chat-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 50px;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .chat-container {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 300px;
        background-color: white;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        padding: 10px;
        display: none;
        flex-direction: column;
    }

        .chat-container textarea {
            resize: none;
        }
</style>